# =====================================================
# OKX Stream Hunter Configuration
# =====================================================

# Claude AI Configuration
claude:
  api_key: "${CLAUDE_API_KEY}"  # Set via environment variable
  model: "claude-sonnet-4-20250514"
  max_tokens: 2000
  enabled: true
  analysis_interval: 300  # Analyze market every 5 minutes

# Trading Configuration
trading:
  symbol: "BTC-USDT-SWAP"
  timeframes:
    - "1s"
    - "5s"
    - "1m"
    - "3m"
    - "5m"
    - "15m"
    - "1h"
    - "4h"
    - "1d"

# WebSocket Configuration
websocket:
  url: "wss://ws.okx.com:8443/ws/v5/public"
  ping_interval: 20
  ping_timeout: 20
  reconnect_delay: 3
  max_reconnect_attempts: 999999

# Database Configuration
database:
  # Set via environment variable: NEON_DATABASE_URL
  pool_min_size: 2
  pool_max_size: 10
  command_timeout: 60
  
  # Batch insert settings
  batch_size: 100
  batch_timeout: 5  # seconds

# Webhooks Configuration
webhooks:
  # Main data webhook (n8n)
  snapshot_url: ""  # Set via WEBHOOK_URL env var
  
  # Health monitoring webhook
  heartbeat_url: ""  # Set via WEBHOOK_HEARTBEAT_URL env var
  
  # Rate limiting
  max_requests_per_second: 10
  timeout: 8

# Order Book Configuration
orderbook:
  levels: 5  # Number of bid/ask levels to track
  mm_pressure_enabled: true

# Indicators Configuration
indicators:
  rsi:
    period: 14
  ema:
    fast: 20
    slow: 50
  macd:
    fast: 12
    slow: 26
    signal: 9
  bollinger_bands:
    period: 20
    std_dev: 2
  atr:
    period: 14

# Data Validation Configuration
validation:
  enabled: true
  
  # Price validation
  max_price_deviation: 0.05  # 5% max change per tick
  min_price: 1000  # Min valid BTC price
  max_price: 1000000  # Max valid BTC price
  
  # Volume validation
  max_volume_multiplier: 10  # vs. recent average
  
  # Deduplication
  dedup_window_seconds: 1
  dedup_enabled: true

# Health Monitoring Configuration
health:
  enabled: true
  heartbeat_interval: 60  # seconds
  
  # Metrics collection
  metrics_enabled: true
  metrics_port: 8080
  
  # Alerting thresholds
  max_tick_gap_seconds: 10
  max_error_rate: 0.01  # 1%
  
  # Auto-restart on critical errors
  auto_restart: true
  max_restarts: 5

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s %(name)s %(levelname)s %(message)s"
  
  # File logging (optional)
  file_enabled: false
  file_path: "/var/log/okx_stream_hunter/app.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# Plugin System Configuration
plugins:
  # Core plugins (always enabled)
  candle_builder:
    enabled: true
  
  indicators:
    enabled: true
    
  validation:
    enabled: true
    
  health:
    enabled: true

# Performance Configuration
performance:
  # Async settings
  max_concurrent_writes: 100
  max_queue_size: 10000
  
  # Memory limits
  max_candles_in_memory: 5000
  
  # Processing
  process_pool_size: 4