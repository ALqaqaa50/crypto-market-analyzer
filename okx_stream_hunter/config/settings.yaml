# ======================================================
# OKX Stream Hunter â€“ Full Configuration
# ======================================================

# -------------------------
# Claude AI Configuration
# -------------------------
claude:
  enabled: true
  api_key: "${CLAUDE_API_KEY}"
  model: "claude-sonnet-4-20250514"
  max_tokens: 2000
  analysis_interval: 300   # seconds

# -------------------------
# OKX WebSocket Configuration
# -------------------------
okx:
  public_ws: "wss://ws.okx.com:8443/ws/v5/public"

  symbols:
    - "BTC-USDT-SWAP"

  channels:
    - "trades"      # live trades
    - "books5"      # orderbook 5 levels
    - "tickers"     # real-time ticker info

# -------------------------
# Trading Configuration
# -------------------------
trading:
  symbol: "BTC-USDT-SWAP"
  timeframes:
    - "1s"
    - "5s"
    - "1m"
    - "3m"
    - "5m"
    - "15m"
    - "1h"
    - "4h"
    - "1d"

# -------------------------
# Database Configuration (Neon)
# -------------------------
database:
  enabled: true
  url: "${NEON_DATABASE_URL}"

  pool_min_size: 2
  pool_max_size: 10
  command_timeout: 60

  batch_size: 100
  batch_timeout: 5

# -------------------------
# Order Book Configuration
# -------------------------
orderbook:
  levels: 5
  mm_pressure_enabled: true

# -------------------------
# Indicator Settings
# -------------------------
indicators:
  rsi:
    period: 14
  ema:
    fast: 20
    slow: 50
  macd:
    fast: 12
    slow: 26
    signal: 9
  bollinger_bands:
    period: 20
    std_dev: 2
  atr:
    period: 14

# -------------------------
# Data Validation
# -------------------------
validation:
  enabled: true

  max_price_deviation: 0.05
  min_price: 1000
  max_price: 1000000

  max_volume_multiplier: 10

  dedup_enabled: true
  dedup_window_seconds: 1

# -------------------------
# Webhooks (optional, N8N or others)
# -------------------------
webhooks:
  snapshot_url: "${WEBHOOK_URL}"
  heartbeat_url: "${WEBHOOK_HEARTBEAT_URL}"
  max_requests_per_second: 10
  timeout: 8

# -------------------------
# Health Monitoring
# -------------------------
health:
  enabled: true

  heartbeat_interval: 60

  metrics_enabled: true
  metrics_port: 8080

  max_tick_gap_seconds: 10
  max_error_rate: 0.01

  auto_restart: true
  max_restarts: 5

# -------------------------
# Logging
# -------------------------
logging:
  level: "INFO"
  format: "%(asctime)s %(name)s %(levelname)s %(message)s"

  file_enabled: false
  file_path: "/var/log/okx_stream_hunter/app.log"
  max_bytes: 10485760
  backup_count: 5

# -------------------------
# Plugin System
# -------------------------
plugins:
  candle_builder:
    enabled: true

  indicators:
    enabled: true

  validation:
    enabled: true

  health:
    enabled: true

# -------------------------
# Performance / Optimization
# -------------------------
performance:
  max_concurrent_writes: 100
  max_queue_size: 10000
  max_candles_in_memory: 5000
  process_pool_size: 4
